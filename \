import { type JSX } from "react";
import type { TypeTextProps } from "./TypeText";
import TypeText from "./TypeText";

export type SaiElement = {
  component: keyof JSX.IntrinsicElements;
  attrs?: VAttrs;
  typeProps?: Partial<TypeTextProps>;
  childrenProps?: Partial<TypeTextProps>;
  children?: SaiNode[];
};

export type VAttrValue = string | number | boolean | ((ev: Event) => void);

export type VAttrs = Record<string, VAttrValue>;

export type SaiNode = SaiElement | string;

export function SaiDOMWrite(node: SaiNode){
  const [current, setCurrent] = useState(0);
  if (typeof node === 'string') {
    return node
  }
  node.children?.forEach((child: SaiNode, index: number) => {
    if (typeof child === 'string') {
      return <TypeText text={child} {...node.typeProps}/>
    }    
    const mergedProps = {...node.typeProps, ...child.typeProps, ...node.childrenProps}
    const mergedChild = child.typeProps = mergedProps;
    return SaiDOMWrite(child);
  });
};
